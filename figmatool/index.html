<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>title</title>
  <meta name="author" content="Daniel">
  <meta name="description" content="Figma/web prototype tool">
  <link rel="stylesheet" href="style.css">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="clickshield"></div>
    <!-- <div id="testdummy"></div> -->
    <iframe id="figma" style="border: none;" width="414" height="736" crossorigin
    src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Fproto%2FMihgQFCPoEX2rA0UV6aWNG%2FTest-Plugin-Implemenet%3Fnode-id%3D1%253A2%26viewport%3D288%252C325%252C0.3349246084690094%26scaling%3Dcontain?device=mobile" 
    ></iframe>

    <iframe id="figmatwo" style="border: none;" width="414" height="736" crossorigin
    src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Fproto%2FMihgQFCPoEX2rA0UV6aWNG%2FTest-Plugin-Implemenet%3Fnode-id%3D312%253A83%26viewport%3D288%252C325%252C0.3349246084690094%26scaling%3Dcontain?device=mobile" 
    ></iframe>

    <iframe id="web"
     src="https://daniel528.github.io/me/figmatool/prototype.html" name="website" style="border:none;"></iframe>

     <iframe id="webtwo" class="webtwo"
     src="https://daniel528.github.io/me/figmatool/card.html" name="website" style="border:none;"></iframe>
     <!-- <div id="webtwo">bedrock</div> -->
 
     <!-- data:
     handled: true
     nearestScrollingFrameId: "312:83"
     nearestScrollingFrameMousePosition: {x: 359, y: 167}
     nearestScrollingFrameOffset: {x: 0, y: 0}
     presentedNodeId: "312:83"
     targetNodeId: "312:97"
     targetNodeMousePosition: {x: 8, y: 13}
     __proto__: Object
     type: "MOUSE_PRESS_OR_RELEASE" -->
     
  </body>

  <script>
    // var vpWidth = window.innerWidth;
    // var vpHeight = window.innerHeight;
   var vpWidth = 414;
    var vpHeight = 736;
    var turnofWebTwo = true;

    document.body.style.width = vpWidth + "px";
    document.body.style.height = vpHeight + "px";

    var figma = document.querySelector("#figma");
    var web = document.querySelector("#web");

    var figmatwo = document.querySelector("#figmatwo");
    var webtwo = document.querySelector("#webtwo");

    window.addEventListener("message", function(e){
      console.log(e.data)
      if(e.data && e.data.type == "INITIAL_LOAD"){
        web.classList.add('hide');
        figma.classList.remove('hide');
        webtwo.classList.add('hide');
        figmatwo.classList.add('hide');
      }

      if(e.data.type == "PRESENTED_NODE_CHANGED" && e.data.data.presentedNodeId == "315:32"){
        switchToWeb()
      }

      if(e.data.type == "fucklarry"){
        switchToFigmaTwo(e.data.distance, e.data.name)
      }


      if(turnofWebTwo && e.data.type == "PRESENTED_NODE_CHANGED"){
        webtwo.classList.add("hide");
      }
    })

    function switchToWeb(){
      toggle();
    }

    function switchToFigmaTwo(dist, name){
      web.classList.add('hide');
      figma.classList.add('hide');
      webtwo.classList.remove('hide');
      webtwo.classList.add('highest');
      figmatwo.classList.remove('hide');
      webtwo.contentWindow.postMessage({distance:dist, name: name})
      turnofWebTwo = true;
    }

    function webOnTop(){
      
    }

    function toggle(){
      web.classList.toggle('hide');
      figma.classList.toggle('hide');
    }

    [web, figma, webtwo, figmatwo].map(x => {
      x.height = vpHeight;
      x.width = vpWidth;
    })

    // web.height = vpHeight;
    // web.width = vpWidth;
    // figma.height = vpHeight;
    // figma.width = vpWidth;


  </script>
</html>

